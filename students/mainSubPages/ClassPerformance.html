<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="../../js/ServerIP.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/jquery-2.2.1.js" type="text/javascript" charset="utf-8"></script>
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<script type="text/javascript" charset="UTF-8">
			mui.init();
			//接收课堂作业成绩数组
			var classStarArray;
			//总分
			var totalScore = 0;
		</script>
		<style type="text/css">
			.mui-content {
				margin-top: 12px;
			}
		</style>
		<script>
			mui.init({
				swipeBack: true
			});
		</script>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">课堂成绩</h1>
		</header>
		<div class="mui-content">
			<p style="text-indent: 15px;font-size: 18px;">总分：</p>
			<div style="height: 200px;">

				<div style=" width:160px; height:160px; background-color:lightseagreen; border-radius:80px;margin:auto;margin-top: 0px;">

					<span id="totalscore" style="height:160px; line-height:160px; display:block; color:#FFF; text-align:center;font-size: 30px;">0</span>
				</div>
			</div>
			<div class="mui-input-row" style="text-indent: 15px;color: #999;font-size: 16px;">
				课堂表现分：
			</div>
			<div id="list" style="background-color: lightgray;margin-top: 8px">

				<ul id="classStarList" class="mui-table-view">

					<!--<li class="mui-table-view-cell">
						2016/02/05 <i class="mui-pull-right update">2分</i>
					</li>-->
				</ul>
			</div>
		</div>

	</body>
	<script type="text/javascript">
		mui.plusReady(function() {
			//我的信息
			var myinfo;
			myinfo = JSON.parse(localStorage.myInfo);
			mui.ajax(serverIp + "/user/getStuClassScore", {
				data: {
					stuId: myinfo['stuId'],
				},
				dataType: 'json',
				type: 'post',
				timeout: 5000,
				success: function(data) {
					console.log(data['code']);
					if (data['code'] == 200) {
						classStarArray = data['classStarScore'][0];
						//append列
						$("#classStarList").empty();
						var listStr = "";
						for (var key in classStarArray) {
							totalScore += parseInt(classStarArray[key]);
							listStr += "<li class='mui-table-view-cell'>" + key + "<i class='mui-pull-right update'>" + classStarArray[key] + "分</i></li>";
						}
						$("#classStarList").append(listStr);
						document.getElementById("totalscore").innerHTML = totalScore;
					} else {
						console.log("400");
						if (data['code'] == 400) {
							console.log("400");
							mui.toast("失败");
						}
					}
				},
				error: function() {
					console.log("error");
					mui.toast("error!");
				}
			});
		});
	</script>

</html>
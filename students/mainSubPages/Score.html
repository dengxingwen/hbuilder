<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title></title>
		<!--标准mui.css-->
		<link rel="stylesheet" href="../../css/mui.min.css">
		<script src="../../js/ServerIP.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/mui.min.js"></script>

		<script type="text/javascript" charset="UTF-8">
			mui.init();
		</script>

		<style type="text/css">
			.mui-content {
				margin-top: 12px;
			}
		</style>

	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">期末成绩</h1>
		</header>
		<div class="mui-content">
			<p style="text-indent: 15px;font-size: 18px;">期末总评：</p>
			<div style="height: 200px;">

				<div style=" width:160px; height:160px; background-color:lightseagreen; border-radius:80px;margin:auto;margin-top: 0px;">
					<span id="summaryscore" style="height:160px; line-height:160px; display:block; color:#FFF; text-align:center;font-size: 30px;">0</span>
				</div>
			</div>
			<div class="mui-input-row" style="text-indent: 15px;color: #999;font-size: 16px;">
				考试成绩：(80%)
			</div>

			<ul id="scorelist" class="mui-table-view" style="margin-top: 8px;">
				<li class="mui-table-view-cell">
					考试： <i id="finalScore" class="mui-pull-right update">0分</i>
				</li>

			</ul>
			<div class="mui-input-row" style="text-indent: 15px;color: #999;font-size: 16px;margin-top: 8px;">
				平时成绩：(20%)
			</div>
			<ul id="scorelist" class="mui-table-view" style="margin-top: 8px;">
				<li class="mui-table-view-cell">
					课堂： <i id="classperScore" class="mui-pull-right update">0分</i>
				</li>
				<li class="mui-table-view-cell">
					出勤： <i id="attendanceScore" class="mui-pull-right update">0分</i>
				</li>
				<li class="mui-table-view-cell">
					作业： <i id="classworkScore" class="mui-pull-right update">0分</i>
				</li>
			</ul>

		</div>

	</body>

	<script>
		mui.plusReady(function() {
			//我的信息
			var myinfo;
			myinfo = JSON.parse(localStorage.myInfo);
			mui.ajax(serverIp + "/user/getFinalSummary", {
				data: {
					stuId: myinfo['stuId'],
				},
				dataType: 'json',
				type: 'post',
				timeout: 5000,
				success: function(data) {
					console.log(data['code']);
					if (data['code'] == 200) {
						document.getElementById("summaryscore").innerHTML = data['summaryScore'] + "分";
						document.getElementById("finalScore").innerHTML = data['finalScore'] + "分";
						document.getElementById("classperScore").innerHTML = data['classPerScore'] + "分";
						document.getElementById("attendanceScore").innerHTML = data['attendanceScore'] + "分";
						document.getElementById("classworkScore").innerHTML = data['classworkScore'] + "分";
					} else {
						console.log("400");
						if (data['code'] == 400) {
							console.log("400");
							mui.toast("失败");
						}
					}
				},
				error: function() {
					console.log("error");
					mui.toast("error!");
				}
			});
		});
	</script>
	<!--map.put("summaryScore", summaryScore);// 总评
			map.put("finalScore", finalScore); // 卷面
			map.put("classPerScore", classPerScore);// 课堂表现
			map.put("attendanceScore", attendanceScore);// 出勤
			map.put("classworkScore", classworkScore);// 作业-->

</html>
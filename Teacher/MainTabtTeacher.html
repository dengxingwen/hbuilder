<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>教务</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<!--标准mui.css-->
		<link rel="stylesheet" href="../css/mui.min.css">

		<style>
			.title {
				margin: 20px 15px 10px;
				color: #6d6d72;
				font-size: 15px;
			}
			
			.oa-contact-cell.mui-table .mui-table-cell {
				padding: 11px 0;
				vertical-align: middle;
			}
			
			.oa-contact-cell {
				position: relative;
				margin: -11px 0;
			}
			
			.oa-contact-avatar {
				width: 75px;
			}
			
			.oa-contact-avatar img {
				border-radius: 50%;
			}
			
			.oa-contact-content {
				width: 100%;
			}
			
			.oa-contact-name {
				margin-right: 20px;
			}
			
			.oa-contact-name,
			oa-contact-position {
				float: left;
			}
		</style>
		<style>
			.wrapper {
				padding-top: 10px;
				width: 300px;
				background-color: lightcyan;
				height: 150px;
				font: 14px/1.5 arial;
				text-align: center;
				/*margin: 10px auto;*/
			}
			/*tab*/
			
			#star {
				overflow: hidden;
				padding: 4px 0;
			}
			
			#star li {
				float: left;
				width: 20%;
				height: 30px;
				margin: 0px;
				display: inline;
				color: #999;
				font: bold 18px arial;
				cursor: pointer
			}
			
			#star .act {
				color: #c00
			}
			
			#star_word {
				width: 80%;
				height: 30px;
				line-height: 30px;
				position: absolute;
				left: 50%;
				text-align: center;
				display: none;
			}
		</style>

		<script>
			window.onload = function() {
				var star = document.getElementById("star");
				var star_li = star.getElementsByTagName("li");
				var star_word = document.getElementById("star_word");
				var result = document.getElementById("result");
				var i = 0;
				var j = 0;
				var len = star_li.length;
				var word = ['1分', '2分', '3分', "4分", "5分"]
				for (i = 0; i < len; i++) {
					star_li[i].index = i;
					star_li[i].onmouseover = function() {
							star_word.style.display = "block";
							//						star_word.innerHTML = word[this.index];
							//							for (i = 0; i <= this.index; i++) {
							//								star_li[i].className = "act";
							//							}
						}
						//					star_li[i].onmouseout = function() {
						//						star_word.style.display = "none";
						//						//																	for (i = 0; i < len; i++) {
						//						//																		star_li[i].className = "";
						//						//																	}
						//					}
					star_li[i].onclick = function() {
						//						result.innerHTML = (this.index + 1) + "分";
						star_word.style.display = "block";
						star_word.innerHTML = word[this.index];
						for (i = 0; i < len; i++) {
							star_li[i].className = "";
						}
						for (i = 0; i <= this.index; i++) {
							star_li[i].className = "act";
						}
					}
				}
			}
		</script>
		<!--
        	作者：张敏
        	时间：2016-02-16
        	描述：这是随机点名的函数
        -->
		<script type="text/javascript">
			//用于存放网络获取的姓名
			var names = new Array();
			//按钮状态
			var start = true;
			var idd;
			//	var names = new Array("小赵", "小田", "小孙", "小李", "小周", "小吴", "小郑", "小王");
		</script>

	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a id="addclassseting" class="mui-icon mui-icon-plusempty mui-pull-right" style="color: #999;"></a>
			<h1 id="navtitle" class="mui-title">首页</h1>
		</header>
		<nav class="mui-bar mui-bar-tab">
			<a class="mui-tab-item mui-active" href="#tabbar">
				<span class="mui-icon mui-icon-home"></span>
				<span class="mui-tab-label">首页</span>
			</a>
			<a class="mui-tab-item" href="#tabbar-with-chat">
				<span class="mui-icon mui-icon-email"></span>
				<span class="mui-tab-label">成绩</span>
			</a>
			<a class="mui-tab-item" href="#tabbar-with-contact">
				<span class="mui-icon mui-icon-contact"></span>
				<span class="mui-tab-label">通讯录</span>
			</a>
			<a class="mui-tab-item" href="#tabbar-with-map">
				<span class="mui-icon mui-icon-person"></span>
				<span class="mui-tab-label">我</span>
			</a>
		</nav>
		<div class="mui-content">
			<div id="tabbar" class="mui-control-content mui-active" style="height: 100%;">
				<!--
                	作者：张敏
                	时间：2016-02-16
                	描述：用来显示姓名
                -->
				<div style="margin-top: 0px;background-color: lightgray;padding-top: 15px;height: 350px;" align="center">
					<div id="showNameText" style="font-size:20px; color:tomato;text-align: center;height: 44px;"></div>
					<div class="wrapper">
						<!--打分结果
						<span id="result"></span>-->
						<ul id="star">
							<li>★</li>
							<li>★</li>
							<li>★</li>
							<li>★</li>
							<li>★</li>
						</ul>

						<div id="star_word"></div>
						<div>
							<button type="button" class="mui-btn mui-btn-primary" style="width:60px;height:30px;">提交</button>
						</div>
					</div>

					<div>
						<button id="randomnamebutton" type="button" class="mui-btn mui-btn-primary" style="width:60%;height:44px;position: absolute;bottom: 20px;left: 50%;margin-left: -30%;">开始</button>
					</div>
				</div>
				
			</div>
			<div id="tabbar-with-chat" class="mui-control-content" align="center">

				<div style="padding:10px 10px;">
					<div id="segmentedControl" class="mui-segmented-control">
						<a class="mui-control-item mui-active" href="#classscore">
                            课堂成绩
                        </a>
						<a class="mui-control-item" href="#finalscore">
                            期末总评
                        </a>

					</div>
				</div>
				<div>
					<div id="classscore" class="mui-control-content mui-active">
						<ul class="mui-table-view mui-grid-view mui-grid-9">
							<li id="attendance" class="mui-table-view-cell mui-media mui-col-xs-6 mui-col-sm-6">
								<a href="#">
									<span class="mui-icon mui-icon-home"></span>
									<div class="mui-media-body">出勤</div>
								</a>
							</li>
							<li id="classperfomance" class="mui-table-view-cell mui-media mui-col-xs-6 mui-col-sm-6">
								<a href="#">
									<span class="mui-icon mui-icon-email"></span>
									<div class="mui-media-body">课堂</div>
								</a>
							</li>
							<li id="classwork" class="mui-table-view-cell mui-media mui-col-xs-6 mui-col-sm-6">
								<a href="#">
									<span class="mui-icon mui-icon-chatbubble"></span>
									<div class="mui-media-body">作业</div>
								</a>
							</li>
							<li id="activityscore" class="mui-table-view-cell mui-media mui-col-xs-6 mui-col-sm-6">
								<a href="#">
									<span class="mui-icon mui-icon-location"></span>
									<div class="mui-media-body">活动</div>
								</a>
							</li>

						</ul>

					</div>
					<div id="finalscore" class="mui-control-content">
						<h1>期末总评界面</h1>
					</div>

				</div>

			</div>
			<div id="tabbar-with-contact" class="mui-control-content ">
				<div class="title " align="center">
					<button type="button" id="chat" class="mui-btn mui-btn-primary">聊天界面</button>
				</div>
				<ul class="mui-table-view mui-table-view-striped mui-table-view-condensed ">
					<li class="mui-table-view-cell ">
						<div class="mui-slider-cell ">
							<div class="oa-contact-cell mui-table ">
								<div class="oa-contact-avatar mui-table-cell ">
									<img src="../images/02.jpg " width="40 " height="40 " />
								</div>
								<div class="oa-contact-content mui-table-cell ">
									<div class="mui-clearfix ">
										<h4 class="oa-contact-name ">小赵</h4>
										<span class="oa-contact-position mui-h6 ">班长</span>
									</div>
									<p class="oa-contact-cell mui-h6 ">
										15732458790
									</p>
								</div>
							</div>
						</div>
					</li>
					<li class="mui-table-view-cell ">
						<div class="mui-slider-cell ">
							<div class="oa-contact-cell mui-table ">
								<div class="oa-contact-avatar mui-table-cell ">
									<img src="../images/01.jpg " width="40 " height="40 " />
								</div>
								<div class="oa-contact-content mui-table-cell ">
									<div class="mui-clearfix ">
										<h4 class="oa-contact-name ">小田</h4>
										<span class="oa-contact-position mui-h6 ">副班长</span>
									</div>
									<p class="oa-contact-cell mui-h6 ">
										13863781243
									</p>
								</div>
							</div>
						</div>
					</li>
					<li class="mui-table-view-cell ">
						<div class="mui-slider-cell ">
							<div class="oa-contact-cell mui-table ">
								<div class="oa-contact-avatar mui-table-cell ">
									<img src="../images/03.jpg " width="40 " height="40 " />
								</div>
								<div class="oa-contact-content mui-table-cell ">
									<div class="mui-clearfix ">
										<h4 class="oa-contact-name ">小孙</h4>
										<!--<span class="oa-contact-position mui-h6 ">员工</span>-->
									</div>
									<p class="oa-contact-cell mui-h6 ">
										15634789082
									</p>
								</div>
							</div>
						</div>
					</li>
					<li class="mui-table-view-cell ">
						<div class="mui-slider-cell ">
							<div class="oa-contact-cell mui-table ">
								<div class="oa-contact-avatar mui-table-cell ">
									<img src="../images/04.jpg " width="40 " height="40 " />
								</div>
								<div class="oa-contact-content mui-table-cell ">
									<div class="mui-clearfix ">
										<h4 class="oa-contact-name ">小李</h4>
										<span class="oa-contact-position mui-h6 ">团支书</span>
									</div>
									<p class="oa-contact-cell mui-h6 ">
										13523457901
									</p>
								</div>
							</div>
						</div>
					</li>
					<li class="mui-table-view-cell ">
						<div class="mui-slider-cell ">
							<div class="oa-contact-cell mui-table ">
								<div class="oa-contact-avatar mui-table-cell ">
									<img src="../images/06.jpg " width="40 " height="40 " />
								</div>
								<div class="oa-contact-content mui-table-cell ">
									<div class="mui-clearfix ">
										<h4 class="oa-contact-name ">小周</h4>
										<!--<span class="oa-contact-position mui-h6 ">员工</span>-->
									</div>
									<p class="oa-contact-cell mui-h6 ">
										17826731825
									</p>
								</div>
							</div>
						</div>
					</li>
				</ul>
			</div>
			<div id="tabbar-with-map" class="mui-control-content ">
				<div class="title ">这是教师端中的第4个子页面，该页面显示的是个人基本信息及设置.</div>
				<ul class="mui-table-view ">
					<li class="mui-table-view-cell ">
						<a class="mui-navigate-right ">
						新消息通知
					</a>
					</li>
					<li class="mui-table-view-cell ">
						<a class="mui-navigate-right ">
						隐私
					</a>
					</li>
					<li class="mui-table-view-cell ">
						<a class="mui-navigate-right ">
						通用
					</a>
					</li>
				</ul>
				<ul class="mui-table-view " style="margin-top: 25px; ">
					<li class="mui-table-view-cell ">
						<a class="mui-navigate-right ">
						关于软件
					</a>
					</li>
				</ul>
				<ul class="mui-table-view " style="margin-top: 25px; ">
					<li class="mui-table-view-cell ">
						<a style="text-align: center;color: #FF3B30; " href="LoginRegister/LoginTeacher.html">
						退出登录
					</a>
					</li>
				</ul>
			</div>
		</div>

	</body>
	<script src="../js/mui.min.js"></script>
	<script type="text/javascript" src="../js/jquery-2.2.1.js"></script>
	<script>
		mui.init({
			swipeBack: false //启用右滑关闭功能
		});
	</script>
	<script type="text/javascript">
		//随机点名
		function showName() {
			var index = Math.floor(Math.random() * names.length);
			var name = names[index];
			document.getElementById("showNameText").innerHTML = name;
			idd = setTimeout("showName()", 8);
		}
		//所有点击事件建议这样做
		mui.plusReady(function() {
			console.log("主页");
			var attendance = document.getElementById("attendance");
			var classperfomance = document.getElementById("classperfomance");
			var classwork = document.getElementById("classwork");
			var activityscore = document.getElementById("activityscore");
			var randomnamebutton = document.getElementById("randomnamebutton"); //随机点名
			randomnamebutton.addEventListener('tap', function() {
				console.log("随机点名");
				if (start) {
					showName();
					randomnamebutton.innerHTML = "停止";
					start = false;
				} else {
					clearTimeout(idd);
					randomnamebutton.innerHTML = "点名";
					start = true;
				}
			});
			attendance.addEventListener('tap', function() {
				console.log("出勤");
				mui.openWindow({
					url: "score/classscore/Attendance.html",
					id: 'attendance'
				})
			});
			classperfomance.addEventListener('tap', function() {
				console.log("课堂");
				mui.openWindow({
					url: "score/classscore/ClassPerformance.html",
					id: 'classperfomance'
				})
			});
			classwork.addEventListener('tap', function() {
				console.log("作业");
				mui.openWindow({
					url: "score/classscore/Classwork.html",
					id: 'classwork'
				})
			});
			activityscore.addEventListener('tap', function() {
				console.log("活动");
				mui.openWindow({
					url: "score/classscore/ActivityScore.html",
					id: 'activityscore'
				})
			});
			//处理右上角关于图标的点击事件；
			document.getElementById('addclassseting').addEventListener('tap', function() {
				console.log("设置班级");
				mui.openWindow({
					url: "SettingClass.html",
					id: "info",
					show: {
						aniShow: 'zoom-fade-out',
						duration: 300
					}
				});
			});
			//切换选项卡切换 监听
			mui('.mui-bar-tab').on('tap', 'a', function(e) {
				//更换标题
				document.getElementById('navtitle').innerHTML = this.querySelector('.mui-tab-label').innerHTML;
				var tabtitle = this.querySelector('.mui-tab-label').innerHTML;
				//判断只有当首页时显示右上角加号
				if (this.querySelector('.mui-tab-label').innerHTML == "首页") {
					$("#addclassseting").show();
				} else {
					$("#addclassseting").hide();
				}
			});
			//进入聊天界面
			document.getElementById('chat').addEventListener('tap', function() {
				console.log("进入聊天界面");
				mui.openWindow({
					url: "chat/chat.html",
					id: "chat",
					show: {
						aniShow: 'zoom-fade-out',
						duration: 300
					}
				});
			});
		});
		//获取班级所有学生姓名
		mui.ajax('http://192.168.2.4:8085/teacher/studentNameList', {
			data: {},
			dataType: 'json',
			type: 'post',
			timeout: 5000,
			success: function(data) {
				console.log("success 获取姓名成功");
				console.log(data['code']);
				if (data['code'] == 200) {
					console.log("获取成功");
					//					console.log(data['namelist']);
					//					console.log(data['namelist'][1]);
					for (var i = 0; i < data['namelist'].length; i++) {
						names.push(data['namelist'][i]);
					}
					console.log(names);
				} else {
					console.log("400");
					mui.alert('400错误', '失败', function() {
						console.log("获取失败");
					});
				}
			},
			error: function() {
				console.log("error");
				mui.alert('请检查', '获取失败error', function() {});
			}
		});
	</script>

</html>